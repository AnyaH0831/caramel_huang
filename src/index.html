<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caramel Huang</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <!-- Use Comic Neue as a web-safe comic-style font; falls back to system Comic Sans if unavailable -->
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="top-nav" role="navigation" aria-label="Main navigation">
        <a href="index.html" class="nav-link" data-page="home">Home</a>
        <div class="nav-dropdown">
            <a href="#" class="nav-link" aria-haspopup="true" aria-expanded="false">Game ‚ñæ</a>
            <div class="nav-dropdown-content" role="menu" aria-label="Games">
                <a href="game.html" role="menuitem">TreatCatcher</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="header">
            <h1>Hi! I'm Caramel</h1>
        </div>

        <div class="controls">
            <button class="refresh-btn" onclick="loadImages()">Refresh Gallery</button>
        </div>

        <div class="stats" id="stats"></div>
        
        <div class="visitor-counter" id="visitorCounter">
            <span class="visitor-text">Visitors: </span>
            <span class="visitor-count" id="visitorCount">Loading...</span>
        </div>

        <div class="loading" id="loading">
            Loading your images...
        </div>

        <div class="error" id="error" style="display: none;"></div>

        <div class="gallery" id="gallery"></div>
    </div>

    <!-- Modal for full-size image viewing -->
    <div id="imageModal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <div class="modal-container">
            <div class="modal-image-container">
                <img class="modal-content" id="modalImage">
            </div>
            <div class="modal-info-panel" id="modalInfoPanel">
                <h3 class="info-title" id="infoTitle">Image Details</h3>
                <!-- Mobile-friendly close button inside info panel -->
                <button class="mobile-close" onclick="closeModal()" aria-label="Close">Close</button>
                <div class="info-section">
                    <h4>Date</h4>
                    <p id="infoDate">-</p>
                </div>
                <div class="info-section">
                    <h4>Weather</h4>
                    <p id="infoWeather">-</p>
                </div>
                <div class="info-section">
                    <h4>Location</h4>
                    <p id="infoLocation">-</p>
                </div>
                <div class="info-section">
                    <h4>Description</h4>
                    <p id="infoDescription">-</p>
                </div>
                <div class="download-section">
                    <button class="download-btn" id="downloadBtn" onclick="downloadImage()">
                        View Image
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Caramel Chatbot Widget -->
    <div id="chatWidget" class="chat-widget">
        <div id="chatToggle" class="chat-toggle" onclick="toggleChat()">
            <span class="chat-icon">
                <svg width="32" height="32" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                    <path d="M 19.498 6.398 C 16.965 7.039, 13.941 10.099, 13.207 12.672 C 11.514 15.451, 12.708 18.751, 15.860 20.110 C 16.998 20.831, 18.496 20.929, 19.739 20.364 C 20.693 19.930, 21.752 18.840, 22.280 17.746 C 22.941 16.380, 23.104 15.516, 23.087 13.440 C 23.057 9.329, 22.256 6.668, 20.831 5.942 C 20.390 5.717, 19.696 5.637, 19.498 6.398 M 28.128 6.398 C 27.078 6.740, 26.461 7.551, 25.978 9.216 C 25.635 10.397, 25.422 12.266, 25.410 14.186 C 25.398 16.157, 25.570 17.055, 26.220 18.396 C 26.742 19.478, 27.801 20.573, 28.761 21.024 C 29.376 21.314, 29.469 21.336, 30.432 21.338 C 31.399 21.340, 31.500 21.321, 32.196 20.976 C 33.495 20.357, 34.487 19.155, 35.046 17.524 C 35.775 15.399, 35.658 13.583, 34.661 11.546 C 33.315 8.792, 30.803 6.543, 28.878 6.366 C 28.549 6.341, 28.260 6.353, 28.128 6.398 M 8.322 17.199 C 6.991 17.692, 5.936 19.218, 5.451 21.074 C 5.184 22.126, 5.244 23.570, 5.590 24.385 C 6.232 25.859, 7.893 27.234, 9.627 27.761 C 10.540 28.039, 11.662 27.981, 12.398 27.623 C 14.173 26.755, 15.055 24.305, 14.544 21.711 C 14.028 19.091, 11.670 15.139, 10.065 14.523 C 9.390 14.276, 8.799 14.206, 8.322 17.199 M 38.328 17.245 C 37.080 17.678, 35.798 19.318, 34.611 21.305 C 33.420 23.303, 33.078 25.213, 33.543 26.966 C 33.838 28.233, 34.570 29.397, 35.595 29.900 C 36.338 30.261, 37.454 30.319, 38.367 30.041 C 40.101 29.514, 41.762 28.139, 42.404 26.665 C 42.756 25.839, 42.816 24.403, 42.541 23.341 C 42.045 21.481, 40.992 17.696, 39.666 17.205 C 39.144 17.031, 38.736 17.039, 38.328 17.245 M 22.380 22.110 C 22.043 22.244, 21.356 22.562, 20.853 22.810 C 20.090 23.180, 19.803 23.389, 19.107 24.083 C 18.600 24.590, 18.076 25.331, 17.819 25.792 C 16.818 27.516, 15.873 28.653, 13.647 30.303 C 12.638 31.094, 12.144 31.596, 11.619 32.622 C 10.060 35.914, 11.172 39.239, 14.252 40.735 C 15.528 41.354, 16.559 41.578, 18.144 41.581 C 19.575 41.583, 20.056 41.508, 21.800 41.015 C 22.810 40.730, 23.128 40.682, 24.000 40.682 C 24.872 40.682, 25.190 40.730, 26.200 41.015 C 27.939 41.507, 28.423 41.583, 29.856 41.580 C 30.882 41.579, 31.330 41.535, 32.016 41.363 C 35.120 40.584, 37.059 38.438, 37.073 35.765 C 37.085 33.458, 35.839 31.306, 33.495 29.582 C 32.061 28.529, 31.091 27.363, 30.185 25.610 C 29.914 25.083, 29.580 24.654, 28.944 24.014 C 28.201 23.266, 27.940 23.073, 27.158 22.690 C 26.652 22.444, 25.941 22.244, 25.599 22.154 C 24.753 21.932, 23.195 21.933, 22.380 22.110" fill="#bd7e01"/>
                </svg>
            </span>
        </div>
        
        <div id="chatContainer" class="chat-container">
            <div class="chat-header">
                <h3 class="chat-header-title">Caramel</h3>
                <button class="chat-close" onclick="toggleChat()">√ó</button>
            </div>
            <div id="chatMessages" class="chat-messages">
                <div class="caramel-label">
                    <span class="caramel-profile-msg">
                        <svg width="22" height="22" viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                            <path d="M 19.498 6.398 C 16.965 7.039, 13.941 10.099, 13.207 12.672 C 11.514 15.451, 12.708 18.751, 15.860 20.110 C 16.998 20.831, 18.496 20.929, 19.739 20.364 C 20.693 19.930, 21.752 18.840, 22.280 17.746 C 22.941 16.380, 23.104 15.516, 23.087 13.440 C 23.057 9.329, 22.256 6.668, 20.831 5.942 C 20.390 5.717, 19.696 5.637, 19.498 6.398 M 28.128 6.398 C 27.078 6.740, 26.461 7.551, 25.978 9.216 C 25.635 10.397, 25.422 12.266, 25.410 14.186 C 25.398 16.157, 25.570 17.055, 26.220 18.396 C 26.742 19.478, 27.801 20.573, 28.761 21.024 C 29.376 21.314, 29.469 21.336, 30.432 21.338 C 31.399 21.340, 31.500 21.321, 32.196 20.976 C 33.495 20.357, 34.487 19.155, 35.046 17.524 C 35.775 15.399, 35.658 13.583, 34.661 11.546 C 33.315 8.792, 30.803 6.543, 28.878 6.366 C 28.549 6.341, 28.260 6.353, 28.128 6.398 M 8.322 17.199 C 6.991 17.692, 5.936 19.218, 5.451 21.074 C 5.184 22.126, 5.244 23.570, 5.590 24.385 C 6.232 25.859, 7.893 27.234, 9.627 27.761 C 10.540 28.039, 11.662 27.981, 12.398 27.623 C 14.173 26.755, 15.055 24.305, 14.544 21.711 C 14.028 19.091, 11.670 15.139, 10.065 14.523 C 9.390 14.276, 8.799 14.206, 8.322 17.199 M 38.328 17.245 C 37.080 17.678, 35.798 19.318, 34.611 21.305 C 33.420 23.303, 33.078 25.213, 33.543 26.966 C 33.838 28.233, 34.570 29.397, 35.595 29.900 C 36.338 30.261, 37.454 30.319, 38.367 30.041 C 40.101 29.514, 41.762 28.139, 42.404 26.665 C 42.756 25.839, 42.816 24.403, 42.541 23.341 C 42.045 21.481, 40.992 17.696, 39.666 17.205 C 39.144 17.031, 38.736 17.039, 38.328 17.245 M 22.380 22.110 C 22.043 22.244, 21.356 22.562, 20.853 22.810 C 20.090 23.180, 19.803 23.389, 19.107 24.083 C 18.600 24.590, 18.076 25.331, 17.819 25.792 C 16.818 27.516, 15.873 28.653, 13.647 30.303 C 12.638 31.094, 12.144 31.596, 11.619 32.622 C 10.060 35.914, 11.172 39.239, 14.252 40.735 C 15.528 41.354, 16.559 41.578, 18.144 41.581 C 19.575 41.583, 20.056 41.508, 21.800 41.015 C 22.810 40.730, 23.128 40.682, 24.000 40.682 C 24.872 40.682, 25.190 40.730, 26.200 41.015 C 27.939 41.507, 28.423 41.583, 29.856 41.580 C 30.882 41.579, 31.330 41.535, 32.016 41.363 C 35.120 40.584, 37.059 38.438, 37.073 35.765 C 37.085 33.458, 35.839 31.306, 33.495 29.582 C 32.061 28.529, 31.091 27.363, 30.185 25.610 C 29.914 25.083, 29.580 24.654, 28.944 24.014 C 28.201 23.266, 27.940 23.073, 27.158 22.690 C 26.652 22.444, 25.941 22.244, 25.599 22.154 C 24.753 21.932, 23.195 21.933, 22.380 22.110" fill="#bd7e01"/>
                        </svg>
                    </span>
                    <span class="caramel-msg-name">Caramel</span>
                </div>
                <div class="message bot-message">
                    Woof! Hi there! I'm Caramel, and I love to chat! Ask me anything about my adventures, favorite treats, or just say hello! üêï
                </div>
            </div>
            <div class="chat-input-container">
                <input 
                    type="text" 
                    id="chatInput" 
                    class="chat-input" 
                    placeholder="Type your message..."
                    onkeypress="handleChatKeyPress(event)"
                >
                <button id="chatSend" class="chat-send" onclick="sendChatMessage()">
                    <span class="send-icon">‚û§</span>
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>